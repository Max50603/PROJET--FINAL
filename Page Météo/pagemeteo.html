<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="pagemeteo.css">
    <link rel="stylesheet" href="responsive.css">
    <!-- <script src="script.js"></script> -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Oswald&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <title>Page Météo</title>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('weather-form');
            const input = document.querySelector('input[type="text"]');
            const weatherDiv = document.getElementById("weather");

                form.addEventListener('submit', (event) => {
                    event.preventDefault();
                    const city = input.value.trim();

                    const apiKey = "60e4c061b78d9b993bf7cd6c2e8ce637"
                    fetch(`https://api.openweathermap.org/data/2.5/weather?q=$Paris&appid=$60e4c061b78d9b993bf7cd6c2e8ce637&units=metric`)
                    .then(reponse => response.json())
                    .then(data => {
                        const weather = {
                            city: data.name,
                            description: data.weather[0].description,
                            temperature: data.main.temp,
                            humidity: data.main.humidity,
                            icon: data.weather[0].icon,
                        };
                        displayWeather(weather);
                    })
                    .catch(error => console.error(error));
                });
        });

        

        function displayWeather(weather){
            weatherDiv.innerHTML = '';
            const card = document.createElement('div');
            card.classList.add('weather-card');

            const title = document.createElement('h2');
            title.textContent = weather.city;
            card.appendChild(title);

            const icon = document.createElement('img');
            icon.src = `http://openweathermap.org/img/wn/${weather.icon}.png`;
            card.appendChild(icon);

            const description = document.createElement('p');
            description.textContent = weather.description;
            card.appendChild(description);

            const temperature = document.createElement('p');
            temperature.textContent = `Température: ${weather.temperature} °C`;
            card.appendChild(temperature);

            const humidity = document.createElement('p');
            humidity.textContent = `Humidité: ${weather.humidity}%`;
            card.appendChild(humidity);

            weatherDiv.appendChild(card);
            weatherDiv.style.display = 'block';
        };
    </script>
</head>
<body>
    <h1>PAGE METEO</h1>
    
    <a href="#" class="retourenhaut"></a>
        <img class="btn1" src="../img/959157.png" alt="fleche haut">
    <nav class="connexion">
        <a href="../Page de Connexion/index.html">Connexion</a>
    </nav>
    <nav class="pages">  
        <button class="btn" type="button"><a href="../Météorologie Générale/index.html">Météorologie Générale</a></button>
        <button class="btn" type="button"><a href="../Les Nuages/Nuages.html">Les Nuages</a></button>
        <button class="btn" type="button"><a href="../Les Orages/Orages.html">Les Orages</a></button>
        <button class="btn" type="button"><a href="../Les Fronts/Les Fronts.html">Les Fronts</a></button>
        <button class="btn" type="button"><a href="../Le Vent/levent.html">Le Vent</a></button>
        <button class="btn" type="button"><a href="../Phénomènes Extrèmes/phenomène.html">Phénomènes Extrèmes</a></button>
    </nav>
    <nav class="liens">
        <h3 class="suppression-responsive">Liens Utiles:</h3>
        <button class="boutton"><a href="https://meteofrance.com/" target="_blank">MétéoFrance</a></button>
        <button class="boutton"><a href="https://www.meteociel.fr/" target="_blank">MétéoCiel</a></button>
        <button class="boutton"><a href="https://www.infoclimat.fr/" target="_blank">InfosClimat</a></button>
        <button class="boutton"><a href="https://www.keraunos.org/" target="_blank">Keraunos</a></button>
    </nav>
    <section>
        <div class="container">
            <h1 class="meteo">Météo</h1>
            <form id="weather-form"  action="">
                <label for="city">Entrez une ville :</label>
                <input type="text" name="city" id="city" required autocomplete="off">
                <button type="submit">Rechercher</button>
            </form>
            <div id="weather"></div>
        </div>
    </section>
</body>